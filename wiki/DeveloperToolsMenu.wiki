#summary Alfresco Share module that add a developer menu to Share.

<wiki:toc max_depth="2" />

= Alfresco Share Developer Tools Menu =

Author: Florian Maul

This project adds a developers menu to the Alfresco Share menu to make all the 
most important developer tools available on every page of Alfresco share.

http://fme-alfresco-extensions.googlecode.com/svn/trunk/Devtools Menu/screenshots/devtools-menu-01.png


== Installation == 

The component has been developed to install on top of an existing Alfresco
4.x installation. There are two different version in this archive with
a specific folder for each of the Alfresco version.

The extensions is distributed as a single jar file that can be copied to the 
shared folder. It only contains Share extensions and no extensions to the
Alfresco repository (at least at the moment).

Copy the file fme-alfresco-devtools-share-0.1.jar needs to be copied to:

  tomcat/shared/lib/
  
If you are running this extension on a different host/port than localhost:8080
you might want to change the URLs used within the developer menu. Add the 
following entry to your share-custom-config.xml and change the URLs to reflect
your Alfresco setup:

    <config evaluator="string-compare" condition="DevTools">
		<devtools>
			<explorerBaseUrl>http://127.0.0.1:8080/alfresco</explorerBaseUrl>
			<solrAdminUrl>https://127.0.0.1:8443/solr/alfresco/admin/</solrAdminUrl>
		</devtools>
	</config>

Most of the time the devtools menu used Share's proxy to access the repository
but for some links these URLs are needed.


== Building == 

To build the individual JAR files, run the following command from the base 
project directory.

    ant -Dalfresco.sdk.dir=c:\dev\sdks\alfresco-enterprise-sdk-4.0.0 clean dist-jar

The command should build a JAR file named fme-alfresco-devtools-share-0.1.jar

To deploy the extension files into a local Tomcat instance for testing, you can 
use the hotcopy-tomcat-jar task. You will need to set the tomcat.home
property in Ant.

    ant -Dtomcat.home=C:/Alfresco/tomcat clean hotcopy-tomcat-jar
    
Once you have run this you will need to restart Tomcat so that the classpath 
resources in the JAR file are picked up.


Using the component
-------------------
The devtools menu is implemented as a Share module, that means you have to go to h
http://localhost:8080/share/page/modules/deploy to enable the menu.

After enabling the "fme Devtools Menu" module, the menu will appear in the Share
header.


This project defines a repository extension that executes javascript files at server startup time to bootstrap content or configure the repository via Javascript. It can be used to ensure certain nodes exist, create test data at startup or perform clean up operations, whatever you need to do.

I recommend using the [http://code.google.com/p/share-extras/wiki/JavascriptConsole Javascript Console] to help creating the javascript files that can be executed with this extension. 

==Features==

This is really simple extension that does the following:
  * run once at Alfreco server startup time (bootstrap)
  * look for javascript files in a classpath folder
  * executes all javascript files with the admin privileges

== Installation ==

The add-on has been developed to install on top of an existing Alfresco
3.4 installation.

You need to copy the *fme-script-bootstrap.jar* into the alfresco web app because it contains Java classes that need access to the Alfresco repository services. I would suggest to do the following:
  * Extract alfresco.war or let tomcat do it
  * Copy fme-script-bootstrap.jar to tomcat/webapps/alfresco/WEB-INF/lib/ 
  * Create the folder tomcat/shared/classes/alfresco/extension/bootstrap-scripts
  * See below on: Using the Script Bootstrap extension
  * (Re-)start Alfresco.

== Using the Script Bootstrap extension ==

  * When the jar is installed in the alfresco webapp it looks for scripts in the classpath. All scripts matching this pattern are executed: alfresco/extension/bootstrap-scripts/`*`.js
  * In the sourcecode repository you can find [http://code.google.com/p/fme-alfresco-extensions/source/browse/trunk/Script+Bootstrap/#Script%20Bootstrap%2Fexamples%2Fbootstrap-scripts two example scripts]: 
http://fme-alfresco-extensions.googlecode.com/svn/trunk/Script%20Bootstrap/documentation/screenshot_01.png
  * The example script [http://code.google.com/p/fme-alfresco-extensions/source/browse/trunk/Script+Bootstrap/examples/bootstrap-scripts/create+project+structure.js create project structure.js] creates a folder structure in a Share site like this:
http://fme-alfresco-extensions.googlecode.com/svn/trunk/Script%20Bootstrap/documentation/screenshot_02.png
  * You can put as many javascript files as you like into the tomcat/shared/classes/alfresco/extension/bootstrap-scripts/ folder or into a corresponding folder in any JAR file.
  * The scripts are executed at each startup of the Alfresco repository
    * All scripts are executed with the user "admin"
    * Each script runs in it's own transaction
    * Scripts are executed sequentially, the order is unspecified
    * Script variables document and space are both set to companyhome

== Building from Source ==

An Ant build script is provided to build a JAR file containing the 
custom files, which can then be installed into the 'tomcat/alfresco/WEB-INF/lib' folder of your Alfresco installation.

To build the JAR file, run the following command from the base project 
directory.

    ant clean dist-jar

The command should build a JAR file named fme-script-bootstrap.jar in the 'dist' directory within your project.

To deploy the dashlet files into a local Tomcat instance for testing, you can use the hotcopy-tomcat-jar task. You will need to set the tomcat.home property in Ant.

    ant -Dtomcat.home=C:/Alfresco/tomcat clean hotcopy-tomcat-jar
    
Once you have run this you will need to restart Tomcat so that the classpath resources in the JAR file are picked up.